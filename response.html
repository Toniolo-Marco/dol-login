<!DOCTYPE html>
<html>
    <head>
                        <meta charset="UTF-8">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=4, user-scalable=yes">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="icon" type="image/ico" href="/idp/images/favicon.ico" />
        <!-- Javascript 3rd party-->
        <script src="/idp/static/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
        <script src="/idp/static/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>        
        <script src="/idp/static/ajax/libs/respond.js/1.4.2/respond.min.js"></script> 
        <!--[if lt IE 8]>
        <script src="/idp/static/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <script src="/idp/static/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <![endif]-->        
        <!-- Css 3rd party-->
        <link href="/idp/static/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
        <!-- Css -->
        <link href="/idp/css/layout.css" rel="stylesheet" />        

        <!-- CIE 10/05/2021 stylesheet per pulsanti login CIE e SPID "azzurri" -->
        <link href="/idp/css/spid-sp-access-button.min.css" type="text/css" rel="stylesheet" />        

        <script type="text/javascript">
               // logout sson session
                function logoutShib(event) {
                        // IdP logout 
                        var strUrl = "/idp/profile/Logout", strReturn = "";
                        jQuery.ajax({
                            url: strUrl,
                            success: function (html) {
                                strReturn = html;
                            },
                            async: false
                        });
                }                                                                                                                                                
        </script>                                                                       


        <script type="text/javascript">

            var languageinfo=navigator.language? navigator.language : navigator.userLanguage;
            $(document).ready(function () {
            if (languageinfo.indexOf('en') != -1){
                $("*.en").removeClass("hide");
                $("*.it").addClass("hide");
                $("p.textinglese").removeClass("hide");
                $("p.textitaliano").addClass("hide");
                $("a.textinglese").removeClass("hide");
                $("a.textitaliano").addClass("hide");
            
                                }
                    
            $("p.textitaliano").click(function () {
                        $("p.textitaliano").slideDown(function () {
                        $("*.en").removeClass("hide");
                        $("*.it").addClass("hide");
                        $("p.textinglese").removeClass("hide");
                        $("p.textitaliano").addClass("hide");
                        $("a.textinglese").removeClass("hide");
                        $("a.textitaliano").addClass("hide");
                    });
                })
                
            $("p.textinglese").click(function () {
                        $("p.textinglese").slideDown(function () {
                        $("*.it").removeClass("hide");
                        $("*.en").addClass("hide");
                        $("p.textitaliano").removeClass("hide");
                        $("p.textinglese").addClass("hide");
                        $("a.textinglese").removeClass("hide");
                        $("a.textitaliano").addClass("hide");
                    });
                })
            })

        </script>
        
                <script type="text/javascript">
                        function UpdateQueryString(key, value, url) {
                            if (!url) url = window.location.href;
                            var re = new RegExp("([?&])" + key + "=.*?(&|#|$)(.*)", "gi"),
                                hash;

                            if (re.test(url)) {
                                if (typeof value !== 'undefined' && value !== null)
                                    return url.replace(re, '$1' + key + "=" + value + '$2$3');
                                else {
                                    hash = url.split('#');
                                    url = hash[0].replace(re, '$1$3').replace(/(&|\?)$/, '');
                                    if (typeof hash[1] !== 'undefined' && hash[1] !== null) 
                                        url += '#' + hash[1];
                                    return url;
                                }
                            }
                            else {
                                if (typeof value !== 'undefined' && value !== null) {
                                    var separator = url.indexOf('?') !== -1 ? '&' : '?';
                                    hash = url.split('#');
                                    url = hash[0] + separator + key + '=' + value;
                                    if (typeof hash[1] !== 'undefined' && hash[1] !== null) 
                                        url += '#' + hash[1];
                                    return url;
                                }
                                else
                                    return url;
                            }
                        }
                </script>

        <script type="text/javascript">
        

            $(document).ready(function() {
                $("a.switchlang").click(function() {
                        //this.href=UpdateQueryString("lang", this.text.toLowerCase(), null);
                        location = UpdateQueryString("lang", this.text.toLowerCase(), null);
                        return false;
                })
            });
            
            
        </script>
        <title>UniTrento Login</title>

        <script type="text/javascript">
        
                function SetDomainButton() {
                    var clid = $("#clid").val();
                    var dominio = $("input:checked").val();
                    var atunitn = clid.indexOf('@unitn.it');
                    var atguest = clid.indexOf('@guest.unitn.it');
                    var atvisiting = clid.indexOf('@visiting.unitn.it');                    
                    var at = clid.indexOf('@');

                    if (clid.length > 0){
                        if (atunitn != -1){
                        $('input[name="dominio"]')[0].checked = true;
                    $('label[data-toggle="at"]').not('[data-title="untn"]').removeClass('btn-domain').addClass('btn-default');
                    $('label[data-toggle="at"][data-title="unitn"]').removeClass('btn-default').addClass('btn-domain');
                        }else if (atguest != -1){
                        $('input[name="dominio"]')[1].checked = true;
                    $('label[data-toggle="at"]').not('[data-title="guest"]').removeClass('btn-domain').addClass('btn-default');
                    $('label[data-toggle="at"][data-title="guest"]').removeClass('btn-default').addClass('btn-domain');
                        }else if (atvisiting != -1){
                        $('input[name="dominio"]')[2].checked = true;
                    $('label[data-toggle="at"]').not('[data-title="visiting"]').removeClass('btn-domain').addClass('btn-default');
                    $('label[data-toggle="at"][data-title="visiting"]').removeClass('btn-default').addClass('btn-domain');
                        }else if(at == -1) {
                            $("#clid").val(clid + dominio);
                        } else {
                            $("#clid").val(clid.substring(0, at) + dominio);
                        }
                        }
                }
        
            
            function SetUsernameDomain() {
                var clid = $("#clid").val();
                var dominio = $("input:checked").val();
                var at = clid.indexOf('@');
                if (clid.length > 0){
                if (at == -1) {
                    $("#clid").val(clid + dominio);
                } else {
                    $("#clid").val(clid.substring(0, at) + dominio);
                }            
            }
            }
            

            $(document).ready(function() {
                SetDomainButton();
            
                $("#clid").blur(function() {
                        SetDomainButton();
                })
                
                $(":radio").click(function() {
                        SetUsernameDomain();
                })
                
            });         

            
            
        </script>

    </head>
    <body>
        <header id="header">
                              <div class="container">
            <div class="row">
                <div id="logo" class="col-xs-6">
                    <a href="https://www.unitn.it">
                        <img class="img-responsive" alt="UniTrento" src="/idp/images/MyDU_logo_UNITRENTO_EN.png">
                    </a>
                </div>
                <div id="lang" class="col-xs-6 text-right">
                    <span>
                        <p class="idptype">UniTrento-3</p>
                        <a class="switchlang" id="switch-to-it" href="#it">IT</a>|<a class="switchlang" id="switch-to-en" href="#en">EN</a>
                    </span>
                </div>
            </div>
            </div>        </header>
        <div id="content">
            <div id="logincontainer" class="container">
                <form id="login" class="form" name="shibLogin" action="/idp/profile/SAML2/Redirect/SSO?execution=e1s1" method="post">
                                                        
                    <div class="form-group">                                                                           
                        <label for="clid">Username</label>
                        <div class="input-group col-sm-12 col-xs-12">
                            <!-- <span class="input-group-addon" id="basic-addon"><i class="glyphicon glyphicon-user"></i></span> -->
                            <input tabindex="1" autofocus="autofocus" name="j_username" type="email" class="form-control" id="clid" onclick="removeAlert()" 
                                value="">

                            <script>
                                function removeAlert() {
                                    $("#formAlert").addClass("start");
                                }
                            </script>

                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="inputPassword">Password</label>
                        <label class="pull-right"><a href="https://icts.unitn.it/en/password" tabindex="30">Forgot your password?</a></label>                        
                        <div class="input-group col-sm-12 col-xs-12">
                            <!-- <span class="input-group-addon" id="basic-addon"><i class="glyphicon glyphicon-lock"></i></span> -->
                            <input tabindex="2"  name="j_password" type="password" value="" class="form-control" id="inputPassword" onclick="removeAlert()">
                            
                            <script>
                                function removeAlert() {
                                    $("#formAlert").addClass("start");
                                }
                            </script>
                        </div>
                    </div>
                                       
                    <div class="form-group">
                        <div class="text-center">
                            <div class="btn-group" data-toggle="radio" id="radioBtn">
                                <label class="radio-inline btn btn-domain" data-title="unitn" data-toggle="at">
                                    <input type="radio" name="dominio" id="Radio1" value="@unitn.it" checked> @unitn.it
                                </label>
                                <label class="radio-inline btn btn-default" data-title="guest" data-toggle="at">
                                    <input type="radio" name="dominio" id="Radio2" value="@guest.unitn.it"> @guest.unitn.it
                                </label>
<!--                                 
                                <label class="radio-inline btn btn-default" data-title="visiting" data-toggle="at">
                                    <input type="radio" name="dominio" id="Radio3" value="@visiting.unitn.it"> @visiting.unitn.it
                                </label>
 -->                                
                            </div>
                        </div>                        
                        
                        <!-- Evidenzio il pulsante del dominio sul click -->
                        <script>
                            $('#radioBtn label').on('click', function(){
                                var sel = $(this).data('title');
                                var tog = $(this).data('toggle');
                                $('#'+tog).prop('value', sel);
                                
                                $('label[data-toggle="'+tog+'"]').not('[data-title="'+sel+'"]').removeClass('btn-domain').addClass('btn-default');
                                $('label[data-toggle="'+tog+'"][data-title="'+sel+'"]').removeClass('btn-default').addClass('btn-domain');
                            })
                        </script>
                        <!-- END -->                        
                    </div> 

                    <div class="form-group">
                        <div class="accesso">
                            <button type="submit" name="_eventId_proceed" id="btnAccedi" onClick="this.childNodes[0].nodeValue='Logging in...'" class="btn btn-custom btn-block" autocomplete="off" tabindex="3">
                            Login                            </button>
                            
                            <script>
                                $('#btnAccedi').click(function () {
                                    var btn = $(this);
                                    var un = $(this).find('input[name="j_username"]');
                                    if (un.val()=== "") {
                                       //e.preventDefault();
                                       $("#formAlert").addClass("start");
                                    } else {
                                        btn.button('loading');
                                        setTimeout(function () {
                                            $("#formAlert").addClass("start");
                                            btn.button('reset');
                                        }, 2000);
                                    }
                                });
                            </script>
                        </div>                        
                    </div>

                      
                                   <div id="formAlert" class="start alert alert-danger" role="alert">   
                                      <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
                                      <span class="sr-only"></span>
                    </div>

                                 

                <div class="row">
              

                       <div class="col-xs-12">
                         <div class="divider" style="margin-bottom:20px;">
                           <b>
                           <p><span class="divider-title">Otherwise</span></p></div>
                           </b>
                       </div>
  
            
                                            
                     <div class="col-xs-12" style="text-align: center; margin-bottom:-5px;">
                       <p>
                         <button class="italia-it-button italia-it-button-size-m button-spid" tabindex="4" name="_eventId_authn/ExternalSpidIt" type="submit" id="btn-authn/ExternalSpidIt" class="btn btn-primary btn-block" autocomplete="off">
                           <span class="italia-it-button-icon">
                             <img src="/idp/images/ExternalSpidIt.svg" alt="Immagine ExternalSpidIt">
                           </span>
                           <span class="italia-it-button-text en">Login with SPID</span>
                         </button>
                       </p>
                     </div>
              
<!--                
                    <div class="col-xs-6 col-md-6" >
                      <div class="thumbnail text-center">
                          <input name="_eventId_authn/ExternalSpidIt" style="height: 60px; margin-bottom: -5px;" type="image" src="/idp/images/ExternalSpidIt.png" 
                                        alt="Immagine ExternalSpidIt">                                                      
                          </input>
                          </div>
                    </div>
-->                    
                            
            
                                            
                     <div class="col-xs-12" style="text-align: center; margin-bottom:-5px;">
                       <p>
                         <button class="italia-it-button italia-it-button-size-m button-spid" tabindex="4" name="_eventId_authn/ExternalCieIt" type="submit" id="btn-authn/ExternalCieIt" class="btn btn-primary btn-block" autocomplete="off">
                           <span class="italia-it-button-icon">
                             <img src="/idp/images/ExternalCieIt.svg" alt="Immagine ExternalCieIt">
                           </span>
                           <span class="italia-it-button-text en">Login with CIE</span>
                         </button>
                       </p>
                     </div>
              
<!--                
                    <div class="col-xs-6 col-md-6" >
                      <div class="thumbnail text-center">
                          <input name="_eventId_authn/ExternalCieIt" style="height: 60px; margin-bottom: -5px;" type="image" src="/idp/images/ExternalCieIt.png" 
                                        alt="Immagine ExternalCieIt">                                                       
                          </input>
                          </div>
                    </div>
-->                    
                                          </div>
                
                <div class="col-xs-12">
                   <div class="text-center">
                      <p data-toggle="collapse" data-target="#advancedoptions" class="collapsed" aria-expanded="true" style="cursor: pointer;"><span class="advanced_op" aria-hidden="true"></span> Advanced options</p>
                   </div>                       
                </div>
            
                <div class="col-xs-12">
                  <div id="advancedoptions" class="advancedoptions collapse panel panel-default">
                    <div class="panel-body">
                                                                    

                    
                                <div class="service">                    

                                                                                                      <b>bl-moodle</b>
                                                                                </div>                      

                      <div class="checkbox">                      
                         <label>
                             <input type="checkbox" id="_shib_idp_revokeConsent" name="_shib_idp_revokeConsent" value="true">
                                                                Clear prior granting of permission for release of your information to this service.                              <a class="text-muted collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                                        (More information)                              </a>
                          </label>
                          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" aria-expanded="false" style="height: 0px;">
                              <div class="panel-body">
                                                                <p>Revoke a previous consent to send information updates related to your account to this application.</p><p>Information already comunicated to the application (in past login session) won't be deleted.</p>                              </div>
                          </div>                     
                      </div>
                      
                      
                                 <div class="checkbox">     
                        <label>
                            <input type="checkbox" name="donotcache" value="1">
                                        Don't remember login                            <a class="text-muted collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                         (More information)                            </a>
                                </label>
                        <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                                                <p>Disable Single Sign On feature:</p><p>on next login or on access to a different web application you will be asked again to enter your credential (useful on public access devices).</p><p>NB: password stored in the browser won't be deleted.</p>                            </div>
                        </div>
                                         </div>
                      
                    </div>
                  </div>
                </div>
                </form>
            </div>
        </div>

        <footer id="footer">
                    <div class="container">            
                <div class="row">
                    <div id="useful-links" class="col-sm-12 col-xs-12">
                        <ul>
                            <li>
                                <a tabindex="20" href="https://www.unitn.it/ateneo/2077/privacy">Privacy</a>
                            </li>
                            <li class="link-separator">|</li>
                            <li>
                                <a tabindex="21" href="https://icts.unitn.it/en/anti-phishing-guide">Antiphishing</a>
                            </li>
                                                        <li class="link-separator">|</li>
                            <li>
                                <a tabindex="22" href="https://icts.unitn.it/en/account-unitn">Help & Info</a>
                            </li>                                                    
                        </ul>
                    </div>
                </div>
            </div>
             <!-- Banner loghi pre footer -->
                 <div class="banner">
                     <div class="col-xs-6 col-sm-6">
                         <a class="" href="https://www.idem.garr.it">
                             <img class="img-responsive pull-right" data-holder-rendered="false" src="/idp/images/idem.png" alt="Logo IDEM">
                         </a>
                     </div>                            
                 
                     <div class="col-xs-6 col-sm-6">
                         <a class="" href="http://www.geant.org/Services/Trust_identity_and_security/eduGAIN">
                             <img class="img-responsive pull-left" data-holder-rendered="true" src="/idp/images/edugain.png" alt="Logo Edugain">
                         </a>
                     </div>
                 </div>
             <!-- END -->     
        </footer>               
    </body>
</html>